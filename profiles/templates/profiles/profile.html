{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Editable User Profile</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <style>
    body {
      background-color: #0a1c3b;
      font-family: 'Segoe UI', sans-serif;
    }

    .profile-card {
      background-color: #2c3e50;
      max-width: 420px;
      width: 100%;
      border-radius: 20px;
      position: relative;
    }

    .profile-img {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border: 4px solid #fff;
      transition: transform 0.2s ease;
    }

    .profile-img:hover {
      transform: scale(1.05);
    }

    .zayra-logo {
      position: absolute;
      top: 20px;
      left: 20px;
      width: 60px;
    }

    .back-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      text-decoration: none;
      transition: color 0.2s;
    }

    .back-btn:hover {
      color: #ccc;
    }

    .edit-photo-label {
      cursor: pointer;
      color: #fff;
      background-color: #6c757d;
      padding: 5px 15px;
      border-radius: 8px;
      font-size: 0.85rem;
    }

    .info-box {
      background-color: #bdc3c7;
      color: #2c3e50;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 1rem;
      text-align: left;
    }

    .info-item {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }

    .info-item i {
      margin-right: 10px;
    }

    .info-text {
      flex: 1;
    }

    .info-input {
      flex: 1;
      border: none;
      border-radius: 5px;
      padding: 4px 8px;
    }

    .edit-profile-btn {
      font-weight: bold;
      background-color: #6c757d;
      border: none;
      transition: background-color 0.2s;
    }

    .edit-profile-btn:hover {
      background-color: #5a6268;
    }
  </style>
</head>
<body>

  <!-- Zayra Logo and Back Button -->
  <img src="{% static 'profiles/imgs/logo.jpg' %}" alt="ZAYRA Logo" class="zayra-logo" />
  <a href="javascript:history.back()" class="back-btn"><i class="fas fa-arrow-left"></i></a>

  <!-- Profile Section -->
  <div class="container-fluid min-vh-100 d-flex justify-content-center align-items-center text-white">
    <div class="profile-card text-center p-4 shadow-lg">

      <!-- Profile Image -->
      <div class="mb-3">
        <img id="profileImage" src="{% static 'profiles/imgs/woman.png' %}" alt="Profile Picture" class="rounded-circle profile-img mb-2" />
        <br />
        <label for="fileInput" class="edit-photo-label">Edit photo</label>
        <input type="file" id="fileInput" accept="image/*" style="display: none;" />
      </div>

      <!-- Info Box -->
      <div class="info-box" id="infoBox">
        <div class="info-item">
          <i class="fas fa-user"></i>
          <span class="info-text" id="nameText">Name : Reshika</span>
          <input type="text" class="info-input d-none" id="nameInput" value="Reshika" />
        </div>
        <div class="info-item">
          <i class="fas fa-envelope"></i>
          <span class="info-text" id="emailText">Email Id : reshi@gmail.com</span>
          <input type="email" class="info-input d-none" id="emailInput" value="reshi@gmail.com" />
        </div>
        <div class="info-item">
          <i class="fas fa-map-marker-alt"></i>
          <span class="info-text" id="locationText">Place : Bangalore, India</span>
          <input type="text" class="info-input d-none" id="locationInput" value="Bangalore, India" />
        </div>
      </div>

      <!-- Edit Profile Button -->
      <button id="editBtn" class="btn btn-secondary w-100 edit-profile-btn">Edit Profile</button>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Profile Image and Edit Toggle Script -->
  <script>
    const fileInput = document.getElementById("fileInput");
    const profileImage = document.getElementById("profileImage");

    fileInput.addEventListener("change", function () {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          profileImage.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    });

    const editBtn = document.getElementById("editBtn");
    const nameText = document.getElementById("nameText");
    const emailText = document.getElementById("emailText");
    const locationText = document.getElementById("locationText");

    const nameInput = document.getElementById("nameInput");
    const emailInput = document.getElementById("emailInput");
    const locationInput = document.getElementById("locationInput");

    let isEditing = false;

    editBtn.addEventListener("click", function () {
      if (!isEditing) {
        // Switch to edit mode
        nameText.classList.add("d-none");
        emailText.classList.add("d-none");
        locationText.classList.add("d-none");

        nameInput.classList.remove("d-none");
        emailInput.classList.remove("d-none");
        locationInput.classList.remove("d-none");

        editBtn.textContent = "Save Profile";
        isEditing = true;
      } else {
        // Save changes
        nameText.textContent = nameInput.value;
        emailText.textContent = emailInput.value;
        locationText.textContent = locationInput.value;

        nameText.classList.remove("d-none");
        emailText.classList.remove("d-none");
        locationText.classList.remove("d-none");

        nameInput.classList.add("d-none");
        emailInput.classList.add("d-none");
        locationInput.classList.add("d-none");

        editBtn.textContent = "Edit Profile";
        isEditing = false;
      }
    });
  </script>
</body>
</html>
